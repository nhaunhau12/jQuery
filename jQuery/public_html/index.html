<!DOCTYPE html>
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="css/style.css" rel="stylesheet" type="text/css"/>
    </head>
    <body>
        <form id="myform">
            <input type="text" value="" size="20" id="number" />
            <br/><br/>
            <button type="button" class="phantram">%</button>
            <button type="button" class="canbachai">&radic;</button>
            <button type="button" class="binhphuong">x<sup>2</sup></button>
            <button type="button" class="doiso"><sup>1</sup>/<sub>x</sub></button>
            <br/><br/>
            <button type="button" class="number7">7</button>
            <button type="button" class="number8">8</button>
            <button type="button" class="number9">9</button>
            <button type="button" class="chia">/</button>
            <br/><br/>
            <button type="button" class="number4">4</button>
            <button type="button" class="number5">5</button>
            <button type="button" class="number6">6</button>
            <button type="button" class="nhan">*</button>
            <br/><br/>
            <button type="button" class="number1">1</button>
            <button type="button" class="number2">2</button>
            <button type="button" class="number3">3</button>
            <button type="button" class="tru">-</button>
            <br/><br/>
            <button type="button" class="sodoi">&plusmn;</button>
            <button type="button" class="number0">0</button>
            <button type="button" class="daucham">.</button>
            <button type="button" class="cong">+</button>
            <br/><br/>
            <button type="button" class="reset">C</button>
            <button class="dapso" type="button">=</button>
            <br/><br/>
            <button type="button" class="changetheme">Change theme</button>
        </form>

        <script src="jquery/jquery-2.2.0.min.js" type="text/javascript"></script>

        <script>

            $('.number1').click(function () {
                setValueClick('1');
            });
            $('.number2').click(function () {
                setValueClick('2');
            });
            $('.number3').click(function () {
                setValueClick('3');
            });
            $('.number4').click(function () {
                setValueClick('4');
            });
            $('.number5').click(function () {
                setValueClick('5');
            });
            $('.number6').click(function () {
                setValueClick('6');
            });
            $('.number7').click(function () {
                setValueClick('7');
            });
            $('.number8').click(function () {
                setValueClick('8');
            });
            $('.number9').click(function () {
                setValueClick('9');
            });
            $('.number0').click(function () {
                setValueClick('0');
            });

            function setValueClick(key) {
                var str = $('#number').val();
                $('#number').val(str + key);
            }

            $('.phantram').click(function () {
                var str = $('#number').val();//var str = document.getElementById('number').value;
                if (!isNaN(str)) {
                    var x = eval(str / 100);
                    $('#number').val(x);
                } else {
                    alert('Đây không phải là số');
                }
            });

            $('.cong').click(function () {
                kiemtrapheptoan('+');
            });

            $('.tru').click(function () {
                kiemtrapheptoan('-');
            });

            $('.nhan').click(function () {
                kiemtrapheptoan('*');
            });

            $('.chia').click(function () {
                kiemtrapheptoan('/');
            });

            $('.changetheme').click(function () {
                arr = ['1.jpg', '2.jpg', '4.jpg'];
                $('#myform').css("background", 'url("images/' + arr[ Math.floor(Math.random() * arr.length) ] + '")');
            });

            $('.binhphuong').click(function () {
                $('#number').val($('#number').val() * $('#number').val());
            });

            $('.sodoi').click(function () {
                $('#number').val($('#number').val() * -1);
            });

            $('.doiso').click(function () {
                $('#number').val(1 / $('#number').val());
            });

            $('.canbachai').click(function () {
                $('#number').val(Math.sqrt($('#number').val()));
            });

            $('.daucham').click(function () {
                kiemtrapheptoan('.');
            });

            $('.reset').click(function () {
                $('#number').val('');
            });

            $('.dapso').click(function () {
                var kt = $('#number').val().slice(-1);
                if (!isNaN(kt)) {
                    $('#number').val(eval($('#number').val()));
                } else {
                    alert('Đây không phải là phép toán');
                }
            });

            function kiemtrapheptoan(replace) {

                var kt = $('#number').val().slice(-1);
                var str = $('#number').val().value;

                if (str == '') {
                    $('#number').val(replace);
                    str = $('#number').val();
                    if (str == '/' || str == '*') {
                        $('#number').val('0' + str);
                    }
                } else {
                    if (kt == '-' || kt == '+' || kt == '*' || kt == '/' || kt == '^2' || kt == '.') {
                        $('#number').val($('#number').val().slice(0, -1));
                    }

                    $('#number').val($('#number').val() + replace);
                }


                return true;
            }
        </script>
    </body>
</html>

